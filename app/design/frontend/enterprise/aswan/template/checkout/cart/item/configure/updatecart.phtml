<?php
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://www.magentocommerce.com/license/enterprise-edition
 */
?>

<?php $_product = $this->getProduct(); ?>
<?php $_product_id = $this->getProduct()->getId(); ?>
<?php $buttonTitle = $this->__('Update Cart'); ?>
<?php if ($_product->isSaleable()): ?>
    <div class="add-to-cart">
        <?php if (!$_product->isGrouped()): ?>
        <label for="qty"><?php echo $this->__('Qty:') ?></label>
        <input type="text" name="qty" id="qty" maxlength="12" value="<?php echo $this->getProductDefaultQty() * 1 ?>" title="<?php echo $this->__('Qty') ?>" class="input-text qty" />
        <?php endif; ?>
        <button type="button" id="update_item_btn" title="<?php echo $buttonTitle ?>" class="button btn-cart" onclick="javascript:CheckValidation(<?php echo $_product_id ?>)"><span><span><?php echo $buttonTitle ?></span></span></button>
        <?php echo $this->getChildHtml('', true, true);
        //productAddToCartForm.submit(this)?>
    </div>
<?php endif; ?>
<script type="text/javascript">
function CheckValidation(id){
	var colorattr = document.getElementById(id+'_color_attribute_id');
	var sizeattr = document.getElementById(id+'_size_attribute_id');
	if(valOpt == 0){
		if(noSize == 1)
			updateBag();
		else{
			//jQuery("#cart-add-to-bag").hide();
			jQuery(".validatesize").show();
			jQuery('.size-info-close').show();
			jQuery('.ajax-color-swatch').addClass('color-swatch-active');
			jQuery('.info-dialog').addClass('info-dialog-active');
			jQuery('.size-info-close').addClass('size-close-btn');
		}
	}	
	else{
		updateBag();
	}
}

function  updateBag(){
	jQuery('#ajax-loading').show();
	jQuery('#product_addtocart_form').submit();
	//productAddToCartForm.submit(this);
}
</script>	

